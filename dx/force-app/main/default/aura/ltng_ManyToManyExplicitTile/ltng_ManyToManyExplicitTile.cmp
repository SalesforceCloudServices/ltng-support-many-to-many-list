<!--
/**
* Lists specific fields on a ManyToMany tile
* @component: ltng_ManyToManyExplicitTile
**/
-->
<aura:component
    access="global"
>
    <!-- attributes -->
    <aura:attribute name="recordId" type="String" />
    <aura:attribute name="junctionId" type="String" />

    <aura:attribute name="numFormColumns" type="Integer" />
    <aura:attribute name="includeJunctionButtons" type="Boolean" />

    <aura:attribute name="childrenRelationship" type="Object" />

    <aura:attribute name="junctionFields" type="List" access="private" />
    
    <aura:attribute name="objectApiName" type="String" />
    <aura:attribute name="objectLabel" type="String" />
    <aura:attribute name="junctionApiName" type="String" />
    <aura:attribute name="junctionLabel" type="String" />
    <!-- private attributes -->
    <aura:attribute name="objectFields" type="String[]" default="Name,ProductCode" access="private" />
    <!-- handlers -->
    <aura:handler name="init" value="{!this}" action="{!c.init}" />
    <!-- events -->
    <!-- elements -->

    <!--
    {
        "childrenList": [
            {
            "childId": "a0256000001KS6vAAG",
            "junctionId": "a0056000001aU6wAAE"
            },
            {
            "childId": "a0256000001KS6sAAG",
            "junctionId": "a0056000001aU6xAAE"
            },
            {
            "childId": "a0256000001KS6wAAG",
            "junctionId": "a0056000001aU6yAAE"
            },
            {
            "childId": "a0256000001KS6tAAG",
            "junctionId": "a0056000001aU6sAAE"
            }
        ],
        "childSObjectLabel": "M2M Contact",
        "childSObjectType": "ltng_M2M_Contact__c",
        "junctionLayoutType": "COMPACT",
        "junctionObjectUsesCompactLayout": true,
        "junctionSObjectLabel": "M2M AccountContactRelation",
        "junctionSObjectType": "ltng_M2M_AccountContactRelationship__c",
        "rightLayoutType": "COMPACT",
        "rightObjectUsesCompactLayout": true,
        "rightLayoutType": "COMPACT",
        "rightObjectUsesCompactLayout": true,
        "showJunctionObject": true,
        "showRightObject": true,
        "showRightObject": true
    }
    -->

    <article class="slds-card many-many-tile">
        <div class="slds-card__header slds-grid">
        <header class="slds-media slds-media_center slds-has-flexi-truncate">
            <div class="slds-media__figure">
                <span class="slds-icon_container slds-icon-standard-account" title="account">
                    <lightning:icon iconName="custom:custom39" alternativeText="Icon for Many to Many Child Record" />
                    <span class="slds-assistive-text">Icon for Many to Many Child Record</span>
                </span>
            </div>
            <div class="slds-media__body">
                <h2 class="slds-card__header-title">
                    <a href="javascript:void(0);" class="slds-card__header-link slds-truncate" title="{!v.objectLabel}">
                    <span class="slds-text-heading_small">{!v.objectLabel}</span>
                    </a>
                </h2>
            </div>
        </header>
        </div>
        <div class="slds-card__body slds-card__body_inner">
            <lightning:accordion aura:id="contentAccordion" activeSectionName="junction">
                <aura:if isTrue="{!v.childrenRelationship.showJunctionObject}">
                    <lightning:accordionSection name="junction" label="{#v.junctionLabel}">
                        <aura:if isTrue="{!v.childrenRelationship.junctionLayoutType}">
                            <lightning:recordForm
                                recordId="{!v.junctionId}"
                                objectApiName="{!v.junctionApiName}"
                                layoutType="{!v.childrenRelationship.junctionLayoutType}"
                                columns="{#v.numFormColumns}"
                                mode="view"
                            />
                        </aura:if>
                        <aura:if isTrue="{!not(v.childrenRelationship.junctionLayoutType)}">
                            <lightning:recordForm
                                recordId="{!v.junctionId}"
                                objectApiName="{!v.junctionApiName}"
                                fields="{!v.childrenRelationship.junctionObjectFields}"
                                columns="{#v.numFormColumns}"
                                mode="view"
                            />
                        </aura:if>
                        <footer class="slds-card__footer">
                            <lightning:button variant="Neutral"
                                class="{! if(v.includeJunctionButtons,'','slds-hide') + ' slds-m-bottom_medium'}"
                                label="{! 'Visit ' + v.junctionLabel + ' Record'}"
                                title="{! 'Visit ' + v.junctionLabel + ' Record'}"
                                onclick="{!c.handleJunctionClick}"
                            />
                        </footer>
                    </lightning:accordionSection>
                </aura:if>
                <aura:if isTrue="{!v.childrenRelationship.showRightObject}">
                    <lightning:accordionSection name="child" label="{#v.objectLabel}">
                        <aura:if isTrue="{!v.childrenRelationship.rightLayoutType}">
                            <lightning:recordForm
                                recordId="{!v.recordId}"
                                objectApiName="{!v.objectApiName}"
                                layoutType="{!v.childrenRelationship.rightLayoutType}"
                                columns="{#v.numFormColumns}"
                                mode="view"
                            />
                        </aura:if>
                        <aura:if isTrue="{!not(v.childrenRelationship.rightLayoutType)}">
                            <lightning:recordForm
                                recordId="{!v.recordId}"
                                objectApiName="{!v.objectApiName}"
                                fields="{!v.childrenRelationship.rightObjectFields}"
                                columns="{#v.numFormColumns}"
                                mode="view"
                            />
                        </aura:if>
                        <footer class="slds-card__footer">
                            <lightning:button variant="Neutral"
                                class="slds-m-bottom_medium"
                                label="{! 'Visit ' + v.objectLabel + ' Record'}"
                                title="{! 'Visit ' + v.objectLabel + ' Record'}"
                                onclick="{!c.handleObjectClick}"
                            />
                        </footer>
                    </lightning:accordionSection>
                </aura:if>
            </lightning:accordion>
            <!--
            <lightning:accordion aura:id="contentAccordion" activeSectionName="junction">
                <aura:if isTrue="{!v.childrenRelationship.showRightObject}">
                    showRight Object
                    <lightning:accordionSection name="junction" label="{#v.junctionLabel}">
                        <lightning:recordForm
                            recordId="{!v.junctionId}"
                            objectApiName="{!v.junctionApiName}"
                            layoutType="{#v.childrenRelationship.rightLayoutType}"
                            fields="{#v.childrenRelationship.rightObjectFields}"
                            columns="{#v.numFormColumns}"
                            mode="view"
                        />
                    </lightning:accordionSection>
                </aura:if>
                <aura:if isTrue="{!v.childrenRelationship.showJunctionObject}">
                    showJunction Object
                    <lightning:accordionSection name="child" label="{#v.objectLabel}">
                        <lightning:recordForm
                            recordId="{!v.recordId}"
                            objectApiName="{!v.objectApiName}"
                            layoutType="{#v.childrenRelationship.junctionLayoutType}"
                            fields="{#v.childrenRelationship.junctionObjectFields}"
                            columns="{#v.numFormColumns}"
                            mode="view"
                        />
                    </lightning:accordionSection>
                </aura:if>
            </lightning:accordion>
            -->
        </div>
        <!--
        <footer class="slds-card__footer">
            <lightning:button variant="Neutral"
                class="slds-m-bottom_medium"
                label="{! 'Visit ' + v.objectLabel + ' Record'}"
                title="{! 'Visit ' + v.objectLabel + ' Record'}"
                onclick="{!c.handleObjectClick}"
            />
            <lightning:button variant="Neutral"
                class="{! if(v.includeJunctionButtons,'','slds-hide') + ' slds-m-bottom_medium'}"
                label="{! 'Visit ' + v.junctionLabel + ' Record'}"
                title="{! 'Visit ' + v.junctionLabel + ' Record'}"
                onclick="{!c.handleJunctionClick}"
            />
        </footer>
        -->
    </article>
</aura:component>
